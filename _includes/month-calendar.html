<div class="month-calendar">
  <ul class="month-days"></ul>
</div>

<style>
  :root {
    --point-size: 0.32rem;
    --point-gap: 0.32rem;
    --row-gap: 0.48rem;
  }

  .month-days {
    list-style-type: none;
    display: grid;
    grid-auto-flow: row;
    grid-gap: var(--point-gap);
    row-gap: var(--row-gap);
    grid-auto-rows: var(--point-size);
    grid-template-columns: repeat(7, var(--point-size));
    width: max-content;
  }

  .month-days li {
    margin: 0;
    border-radius: 50%;
  }

  .weekday { background-color: #fff; }
  .filler { background-color: inherit; }
  .past { opacity: 0.5; }
  .weekend { background-color: #ffcc00e2; }
  .now { background-color: rgb(255, 55, 0); }

  html[data-theme='light'] {
    .weekday { background-color: #b2afaf; }
    .now { background-color: rgb(255, 55, 0); }
  }
</style>

<script>
  function renderMonthCalendar(container, month, year) {
    // Clear container if it has children
    while (container.firstChild) {
      container.removeChild(container.firstChild);
    }
    
    const today = moment();
    const currentDay = today.date();
    const currentMonth = today.month();
    const currentYear = today.year();
    
    // Default to current month/year if not specified
    month = month !== undefined ? month : currentMonth;
    year = year !== undefined ? year : currentYear;
    
    const monthData = getMonthData(month, year);
    const firstDayOfMonth = moment({ year, month, day: 1 }).day();
    
    // Add fillers for days before the first day of month
    addFillerDays(container, firstDayOfMonth);
    
    // Add the actual days
    for (let day = 1; day <= monthData.daysInMonth; day++) {
      const dayElement = document.createElement("li");
      
      // Add proper classes
      if (monthData.weekendDays.includes(day)) {
        dayElement.classList.add("weekend");
      } else {
        dayElement.classList.add("weekday");
      }
      
      // Highlight current day
      if (day === currentDay && month === currentMonth && year === currentYear) {
        dayElement.classList.add("now");
      } else if (
        year < currentYear || 
        (year === currentYear && month < currentMonth) || 
        (year === currentYear && month === currentMonth && day < currentDay)
      ) {
        dayElement.classList.add("past");
      }
      
      container.appendChild(dayElement);
    }
    
    // Add fillers to complete the grid if needed
    const totalCells = 7 * Math.ceil((firstDayOfMonth + monthData.daysInMonth) / 7);
    const fillersNeeded = totalCells - firstDayOfMonth - monthData.daysInMonth;
    addFillerDays(container, fillersNeeded);
  }
  
  // Get data for a specific month
  function getMonthData(month, year) {
    const daysInMonth = moment({ year, month }).daysInMonth();
    const weekendDays = [];
    
    for (let day = 1; day <= daysInMonth; day++) {
      const date = moment({ year, month, day });
      if (date.day() === 0 || date.day() === 6) {
        weekendDays.push(day);
      }
    }
    
    return { daysInMonth, weekendDays };
  }
  
  // Add multiple filler elements
  function addFillerDays(container, count) {
    for (let i = 0; i < count; i++) {
      const filler = document.createElement("li");
      filler.classList.add("filler");
      container.appendChild(filler);
    }
  }
</script> 